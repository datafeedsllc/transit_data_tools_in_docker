{"version":3,"sources":["../../src/lib/report-json.js"],"names":["saveFlowCoverageReportJSON","coverageSummaryData","opts","projectDir","outputDir","join","globIncludePatterns","then","Buffer","JSON","stringify","module","exports","generate"],"mappings":"AAAA;;AAIA;;;;AAEA;;;;AAKA,SAASA,0BAAT,CACEC,mBADF,EAEEC,IAFF,EAGE;AACA,MAAIC,aAAaD,KAAKC,UAAtB;AACA,MAAIC,YAAYF,KAAKE,SAAL,IAAkB,eAAKC,IAAL,CAAUF,UAAV,EAAsB,eAAtB,CAAlC;;AAEAF,sBAAoBK,mBAApB,GAA0CJ,KAAKI,mBAA/C;;AAEA,SAAO,yBAAOF,SAAP,EAAkBG,IAAlB,CAAuB;AAAA,WAC5B,4BACE,eAAKF,IAAL,CAAUD,SAAV,EAAqB,oBAArB,CADF,EAEE,IAAII,MAAJ,CAAWC,KAAKC,SAAL,CAAeT,mBAAf,CAAX,CAFF,CAD4B;AAAA,GAAvB,EAKLM,IALK,CAKA,YAAM;AACX,WAAO,CAACN,mBAAD,EAAsBC,IAAtB,CAAP;AACD,GAPM,CAAP;AAQD;;AAEDS,OAAOC,OAAP,GAAiB;AACfC,YAAUb;AADK,CAAjB","file":"report-json.js","sourcesContent":["'use strict';\n\n// @flow\n\nimport path from 'path';\n\nimport {mkdirp, writeFile} from './promisified';\n\nimport type {FlowCoverageSummaryData} from './flow';\nimport type {FlowCoverageReportOptions} from './index';\n\nfunction saveFlowCoverageReportJSON(\n  coverageSummaryData: FlowCoverageSummaryData,\n  opts: FlowCoverageReportOptions\n) {\n  var projectDir = opts.projectDir;\n  var outputDir = opts.outputDir || path.join(projectDir, 'flow-coverage');\n\n  coverageSummaryData.globIncludePatterns = opts.globIncludePatterns;\n\n  return mkdirp(outputDir).then(() =>\n    writeFile(\n      path.join(outputDir, 'flow-coverage.json'),\n      new Buffer(JSON.stringify(coverageSummaryData))\n    )\n  ).then(() => {\n    return [coverageSummaryData, opts];\n  });\n}\n\nmodule.exports = {\n  generate: saveFlowCoverageReportJSON\n};\n"]}