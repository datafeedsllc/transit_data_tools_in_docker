{"version":3,"sources":["../../../src/lib/components/body-coverage-sourcefile.jsx"],"names":["FlowCoverageLocsForm","props","uncovered_locs","concat","map","loc","i","text","start","line","column","join","end","value","module","exports","HTMLReportBodySourceFile","fileName","fileContent","Error","coverageData","percent","NaN","expressions","covered_count","uncovered_count","summaryRelLink","meterBar","htmlTemplateOptions","showMeterBar","threshold","disableLink","filename","flowCoverageParsingError","flowCoverageError","flowCoverageException","flowCoverageStderr","isError","textAlign","String","display","JSON","stringify"],"mappings":"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","file":"body-coverage-sourcefile.js","sourcesContent":["'use strict';\n\n// @flow\n\nimport React from 'react';\n\nimport HTMLReportFooter from './footer';\nimport FlowCoverageFileTableHead from './coverage-file-table-head';\nimport FlowCoverageFileTableRow from './coverage-file-table-row';\nimport FlowCoverageMeterBar from './coverage-meter-bar';\n\nimport type {\n  FlowCoverageReportProps,\n  FlowUncoveredLocsProps\n} from './html-report-page';\n\nfunction FlowCoverageLocsForm(props: FlowUncoveredLocsProps) {\n  var uncovered_locs = props.uncovered_locs; // eslint-disable-line camelcase\n\n  return (\n    <div className=\"ui form\">\n      <div className=\"fields\">\n        <div key=\"uncovered-locs-dropdown\" className=\"sixteen wide inline field\">\n          <select className=\"ui search dropdown uncovered-locations\">\n          {\n            [\n              <option key=\"placeholder\" value=\"\">Uncovered Locations</option>\n            ].concat(\n              uncovered_locs.map((loc, i) => { // eslint-disable-line camelcase\n                const text =\n                  'Start: ' + [loc.start.line, loc.start.column].join(',') + ' - ' +\n                  'End: ' + [loc.end.line, loc.end.column].join(',');\n                const value = loc.start.line;\n\n                return <option key={i} value={value}>{text}</option>;\n              })\n            )\n          }\n          </select>\n        </div>\n        <div key=\"syntax-highlighting-dropdown\" className=\"four wide inline field\">\n          <select className=\"ui search dropdown syntax-highlighting\">\n            <option key=\"es\" value=\"es\">ES6/ES7</option>\n            <option key=\"js\" value=\"js\">JavaScript</option>\n            <option key=\"no\" value=\"no\">None</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nmodule.exports = function HTMLReportBodySourceFile(props: FlowCoverageReportProps) {\n  const {fileName, fileContent} = props;\n  if (!fileName) {\n    throw new Error('Missing fileName in props');\n  }\n\n  const {coverageData} = props;\n  if (!coverageData) {\n    throw new Error('Missing coverageData in props');\n  }\n  const percent = coverageData.percent || NaN;\n\n  if (!coverageData.percent) {\n    throw new Error('Missing percent in coverageData');\n  }\n\n  const {\n    covered_count, uncovered_count, uncovered_locs // eslint-disable-line camelcase\n  } = coverageData.expressions;\n\n  const {summaryRelLink} = props;\n\n  let meterBar;\n\n  if (props.htmlTemplateOptions && props.htmlTemplateOptions.showMeterBar) {\n    meterBar = <FlowCoverageMeterBar percent={percent} threshold={props.threshold}/>;\n  }\n\n  return (\n    <body>\n      <div className=\"ui grid container\">\n        <div className=\"row\">\n          <div className=\"twelve wide column\">\n            <h2 className=\"ui header\">\n              <a href={summaryRelLink} id=\"link-to-summary\">\n                Flow Coverage Report\n              </a>\n            </h2>\n          </div>\n        </div>\n        <div className=\"row\">\n          <table className=\"ui small celled unstackable table\">\n            <FlowCoverageFileTableHead/>\n            <tbody>\n              <FlowCoverageFileTableRow\n                {...{\n                  disableLink: true,\n                  filename: fileName,\n                  flowCoverageParsingError: coverageData.flowCoverageParsingError,\n                  flowCoverageError: coverageData.flowCoverageError,\n                  flowCoverageException: coverageData.flowCoverageException,\n                  flowCoverageStderr: coverageData.flowCoverageStderr,\n                  isError: coverageData.isError,\n                  percent,\n                  /* eslint-disable camelcase */\n                  covered_count,\n                  uncovered_count\n                  /* eslint-enable camelcase */\n                }}\n                />\n            </tbody>\n          </table>\n        </div>\n        {\n          meterBar\n        }\n        <div className=\"row ui one column centered grid\">\n          <div className=\"column\" style={{textAlign: 'left'}}>\n            <div className=\"row\">\n              <FlowCoverageLocsForm\n                uncovered_locs={\n                  uncovered_locs // eslint-disable-line camelcase\n                }\n                />\n            </div>\n            <textarea id=\"file-content\" value={String(fileContent)} readOnly/>\n          </div>\n        </div>\n        <div className=\"row centered\">\n          <HTMLReportFooter {...props}/>\n        </div>\n\n      </div>\n      <pre id=\"file-coverage-data\" style={{display: 'none'}}>\n        {JSON.stringify(coverageData)}\n      </pre>\n    </body>\n  );\n};\n"]}